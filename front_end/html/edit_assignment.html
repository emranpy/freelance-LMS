{% if course_basics["exists"] %}
  {% if assignment_basics["exists"] %}
    <h2>Edit Assignment</h2>
  {% else %}
    <h2>Create Assignment</h2>
  {% end %}
{% end %}

{% if result %}
  {% if result.startswith("Error:") %}
    <p><div class='notification is-danger' style='background-color: #f4a582'><strong>{{ result }}</strong></div></p>
  {% else %}
    <p><div class='notification is-success' style='background-color: #80cdc1'><strong>{{ result }}</strong></div></p>
  {% end %}
{% end %}

{% if course_basics["exists"] %}
  <form method="post" action="/edit_assignment/{{ course_basics["id"]}}/{{ assignment_basics["id"] }}" />

  <p><strong>Title: </strong></p>
  <p><textarea name="title" class="textarea is-info is-normal is-medium" placeholder="Please specify a descriptive title for this assignment." rows="1" style="font-family:monospace" autofocus>{{ assignment_basics["title"] }}</textarea></p>

  <p><strong>Introduction: </strong><br />Please use <a href="https://www.markdownguide.org/basic-syntax/" target='_blank' rel='noopener noreferrer'>Markdown syntax</a> to write an introduction for this assignment.</p>
  <p><textarea name="introduction" class="textarea is-info is-normal is-medium is-fullwidth" placeholder="Please provide an introduction for this assignment." rows="8" style="font-family:monospace">{{ assignment_details["introduction"] }}</textarea></p>

  <p><strong>Timer: </strong><br />Here you can specify the time a student has to complete this assignment. Once a students begins this assignment, they cannot pause the timer.</p>
  <div class="select is-info">
    <select name="has_timer" onchange="showTimerOptions(this.value)" style="padding: 2px;">
      <option
        {% if assignment_details["has_timer"] == 0 %}
          selected
        {% end %}
      >Off</option>
      <option
        {% if assignment_details["has_timer"] == 1 %}
          selected
        {% end %}
      >On</option>
    </select>
  </div>

  <div id="timer_div" class="select is-info" 
    {% if assignment_details["has_timer"] == 1 %}
      style="display: inline;"
    {% else %}
      style="display: none;"
    {% end %}>
    <label for="hour_select">Hours:</label>
    <select id="hour_select" name="hour_select" style="display: inline;">
      {% for hour in hour_options %}
        <option
          {% if hour == assignment_details["hour_timer"] %}
            selected
          {% end %}
        >{{ hour }}</option>
      {% end %}
    </select>
    <label for="minute_select">Minutes:</label>
    <select id="minute_select" name="minute_select" style="display: inline;">
      {% for minute in minute_options %}
        <option
          {% if minute == assignment_details["minute_timer"] %}
            selected
          {% end %}
        >{{ minute }}</option>
      {% end %}
    </select>
  </div>

  <p><strong>Visible: </strong>
    <div class="select is-info">
      <select name="is_visible" style="padding:2px;">
        {% if assignment_basics["visible"] %}
          <option value="Yes" selected>Yes</option>
          <option value="No">No</option>
        {% else %}
          <option value="Yes">Yes</option>
          <option value="No" selected>No</option>
        {% end %}
      </select>
    </div>
  </p>

  <p><input type="submit" class="button is-info is-large is-fullwidth" value="Save" /></p>

  <p>
      {% if assignment_basics["exists"] %}
          <a href="/assignment/{{ course_basics["id"] }}/{{ assignment_basics["id"] }}">Done editing</a>
      {% end %}
  </p><br />
  </form>
{% else %}
  This course has not been created yet.
{% end %}
<br /><br />

<script>
  function showTimerOptions(on) {
    var timer_div = document.getElementById("timer_div");
    if (on == "On") {
      timer_div.style.display = "inline";
    }
    else {
      timer_div.style.display = "none";
    }
  }
</script>